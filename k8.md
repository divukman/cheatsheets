# K8 Cheat-sheet

* Switch from minikube to gcloud and back:
    ```
    You can switch from local (minikube) to gcloud and back with:
    kubectl config use-context CONTEXT_NAME
    to list all contexts:
    kubectl config get-contexts
    ```

* Minikube, reuse docker daemon:

    ```
    eval $(minikube docker-env)
    ``` 

* Minkube dahsboard:
    ```
    minkube dashboard
    ``` 

* Create new deployment object:
    ```
    kubectl create deployment app-name --image=divukman/app-name
    ```

* Delete deployment:
    ```
    kubectl delete deployment app-image
    ```

* Get deployments on cluster:
    ```
    kubect get deployments
    ```

* Get pods:
    ```
    kubectl get pods
    ```

* Expose a deployment with a service
    ```
    kubectl expose deployment deployment-name --type=LoadBalancer --port=8080
    ```

* Get services:
    ```
    kubectl get services
    ```

* Minikube only: Return URL to connect to the service:
    ```
    minikube service service-name
    ```

* Scale deployment:
    ```
    kubectl scale deployment/deployment-name --replicas=3
    ```

* Update deployment:
    ```
    kubectl set image deployment/deployment-name container_name=divukman/app-name:tag
    ```

* Check deployment rollout status:
    ```
    kubectl rollout status deployment/deployment-name
    ```
    
* Rollback deployment:
    ```
    kubectl rollout undo deployment/deployment-name
    kubectl rollout undo deployment/deployment-name --to-revision=N
    ```
    
* View deployment rollout history:
    ```
    kubectl rollout history deployment/deployment-name
    kubectl rollout history deployment/deployment-name --revision=N
    ```
    
* Delete service:
    ```
    kubectl delete service service-name
    ```

* Delete deployment:
    ```
    kubectl delete deployment deployment-name
    ```

## Helm

* Package the chart to be able to distribute manually or through public or private chart repositories
    ```
    helm package ./hello-world
    Successfully packaged chart and saved it to: \hello-world\hello-world-0.1.0.tgz 
    ```
